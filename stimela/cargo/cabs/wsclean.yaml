name: wsclean
image: stimela/wsclean
command: shadems
info: Rapid Measurement Set plotting with xarray-ms and datashader.
msdir: true
prefix: '-'

inputs:
  ms:
    info: Measurement set(s)
    default: null
    writeable: true
    dtype: Directory
    positional: true
  name:
    info: Prefix of output products
    dtype: str
    alias: prefix
  channels-out:
    info: Channels out
    dtype: int
    alias: nchan
  j:
    info: Threads
    dtype: int
    alias: threads
  pol:
    info: Polarizations
    dtype: str
    default: I
  weight:
    info: "Weightmode can be: natural, uniform, briggs. Default: uniform. When using Briggs' weighting, add the robustness parameter, like: '-weight briggs 0.5'"
    dtype: str
    default: briggs 0.0
  size:
    info: Image size in pixels
    repeat_policy: " "
    dtype: int
  scale:
    info: Pixel size
    dtype: Union[int,str]
  niter:
    info: Number of minor clean iterations
    dtype: int

outputs:
  msout:
    info: Output MS
    dtype: Directory
    implicit: "{inputs.ms}"
  dirty:
    info: Dirty images
    dtype: File
    implicit: "{inputs.name}*[0-9]-dity.fits"
  restored: 
    info: Restored images
    dtype: File
    implicit: "{inputs.name}*-[0-9]image.fits"
  residual:
    info: Residual images
    dtype: File
    implicit: "{inputs.name}*-[0-9]residual.fits"
  model:
    info: Model images
    dtype: File
    implicit: "{inputs.name}-*[0-9]-model.fits"
  restored_mfs:
    info: Restored MFS image
    dtype: File
    implicit: "{inputs.name}-*-MFS-image.fits"
  residual_mfs:
    info: Residual MFS image
    dtype: File
    implicit: "{inputs.name}-*-MFS-residual.fits"
  model_mfs:
    info: Model MFS image
    dtype: File
    implicit: "{inputs.name}-*-MFS-model.fits"
  dirty_mfs:
    info: Dirty MFS image
    dtype: File
    implicit: "{inputs.name}-*-MFS-dirty.fits"
  source-list:
    info: Source list
    dtype: File
    implicit: "{inputs.name-*.txt}"
