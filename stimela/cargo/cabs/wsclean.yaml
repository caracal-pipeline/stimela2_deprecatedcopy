name: wsclean
image: stimela/wsclean
command: wsclean
info: Rapid Measurement Set plotting with xarray-ms and datashader.

defaults:
  weight: "briggs 0."

policies:
  positional: false
  prefix: "-"

inputs:
  ms:
    info: Measurement set(s)
    writeable: true
    dtype: MS
    required: true
    policies:
      positional: true
  prefix:
    info: Prefix of output products
    dtype: str
    alias: name
    required: true
  channels-out:
    info: Channels out
    dtype: int
    alias: nchan
  j:
    info: Threads
    dtype: int
    alias: threads
  pol:
    info: Polarizations
    dtype: str
  weight:
    info: "Weightmode can be: natural, uniform, briggs. Default: uniform. When using Briggs' weighting, add the robustness parameter, like: '-weight briggs 0.5'"
    dtype: str
    policies:
      split: " "
      repeat: list
  size:
    info: Image size in pixels
    dtype: int
    required: true
    policies:
      repeat: list
      format_list: ["{size}", "{size}"]
  scale:
    info: Angular pixel size
    dtype: Union[str, float]
    required: true
  niter:
    info: Number of minor clean iterations
    dtype: int

outputs:
  msout:
    info: Output MS
    dtype: Directory
    implicit: "{self.ms}"
  dirty:
    info: Dirty images
    dtype: File
    implicit: "{self.prefix}*[0-9]-dity.fits"
  restored: 
    info: Restored images
    dtype: File
    implicit: "{self.prefix}*-[0-9]-image.fits"
  residual:
    info: Residual images
    dtype: File
    implicit: "{self.prefix}*-[0-9]-residual.fits"
  model:
    info: Model images
    dtype: File
    implicit: "{self.prefix}-*[0-9]-model.fits"
  restored_mfs:
    info: Restored MFS image
    dtype: File
    implicit: "{self.prefix}-*-MFS-image.fits"
  residual_mfs:
    info: Residual MFS image
    dtype: File
    implicit: "{self.prefix}-*-MFS-residual.fits"
  model_mfs:
    info: Model MFS image
    dtype: File
    implicit: "{self.prefix}-*-MFS-model.fits"
  dirty_mfs:
    info: Dirty MFS image
    dtype: File
    implicit: "{self.prefix}-*-MFS-dirty.fits"
  source_list:
    info: Source list
    dtype: File
    implicit: "{self.prefix}-*.txt"
